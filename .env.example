# DeliDev Environment Configuration
# Copy this file to .env and fill in the values

# =============================================================================
# Server Configuration (apps/server)
# =============================================================================

# Server bind address (default: 0.0.0.0:8080)
DELIDEV_BIND_ADDRESS=0.0.0.0:8080

# Single-user mode: uses SQLite, no authentication required
# Set to true for local development (default: false)
DELIDEV_SINGLE_USER_MODE=true

# Database URL for PostgreSQL (required for multi-user mode)
# DATABASE_URL=postgres://user:password@localhost:5432/delidev

# SQLite database path (used in single-user mode)
# DELIDEV_DATABASE_PATH=/path/to/delidev.db

# JWT Configuration
# IMPORTANT: Change this in production!
DELIDEV_JWT_SECRET=change-me-in-production
DELIDEV_JWT_EXPIRATION_HOURS=24
DELIDEV_JWT_ISSUER=delidev

# CORS Configuration
DELIDEV_ENABLE_CORS=true
# Comma-separated list of allowed origins (leave empty for any origin)
# DELIDEV_CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# Allowed redirect origins for OIDC (prevents open redirect attacks)
# Supports wildcard subdomains (e.g., "*.example.com")
# DELIDEV_ALLOWED_REDIRECT_ORIGINS=

# Worker heartbeat timeout in seconds (default: 60)
DELIDEV_WORKER_HEARTBEAT_TIMEOUT=60

# Log level: trace, debug, info, warn, error (default: info)
DELIDEV_LOG_LEVEL=info

# =============================================================================
# OIDC Configuration (optional, for OpenID Connect authentication)
# =============================================================================

# OIDC provider issuer URL
# DELIDEV_OIDC_ISSUER_URL=https://accounts.google.com

# OAuth2 client ID and secret
# DELIDEV_OIDC_CLIENT_ID=your-client-id
# DELIDEV_OIDC_CLIENT_SECRET=your-client-secret

# Redirect URL after authentication
# DELIDEV_OIDC_REDIRECT_URL=http://localhost:8080/auth/callback

# Scopes to request (default: openid,email,profile)
# DELIDEV_OIDC_SCOPES=openid,email,profile

# =============================================================================
# Worker Configuration (apps/worker)
# =============================================================================

# Main server URL that worker connects to (default: http://localhost:8080)
DELIDEV_SERVER_URL=http://localhost:8080

# Worker ID (auto-generated if not specified)
# DELIDEV_WORKER_ID=

# Worker bind address for health checks (default: 0.0.0.0:9000)
DELIDEV_WORKER_BIND_ADDRESS=0.0.0.0:9000

# Maximum concurrent tasks (default: 4)
DELIDEV_WORKER_MAX_TASKS=4

# Heartbeat interval in seconds (default: 30)
DELIDEV_WORKER_HEARTBEAT_INTERVAL=30

# Container runtime: docker or podman (default: docker)
DELIDEV_CONTAINER_RUNTIME=docker

# Use container for execution (default: true)
DELIDEV_USE_CONTAINER=true

# Worktree directory for task execution
# DELIDEV_WORKTREE_DIR=/tmp/delidev/worktrees

# =============================================================================
# AI Agent Secrets (stored in system keychain, but can be set via env for dev)
# =============================================================================

# Anthropic API key for Claude models
# ANTHROPIC_API_KEY=sk-ant-...

# OpenAI API key
# OPENAI_API_KEY=sk-...

# Google AI API key
# GOOGLE_AI_API_KEY=...

# GitHub token for repository access
# GITHUB_TOKEN=ghp_...
